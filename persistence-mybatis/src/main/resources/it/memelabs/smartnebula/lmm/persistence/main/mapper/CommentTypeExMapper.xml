<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="it.memelabs.smartnebula.lmm.persistence.main.mapper.CommentTypeExMapper">
    <resultMap id="BaseResultMap" type="it.memelabs.smartnebula.lmm.persistence.main.dto.CommentType"
               extends="it.memelabs.smartnebula.lmm.persistence.main.mapper.CommentTypeMapper.BaseResultMap">
    </resultMap>

	<sql id="Example_Where_Clause">        
        <trim prefix="WHERE" prefixOverrides="and |or ">
            <trim prefix="and (" suffix=")" prefixOverrides="WHERE">
                <include refid="it.memelabs.smartnebula.lmm.persistence.main.mapper.CommentTypeMapper.Example_Where_Clause"/>                    
            </trim>
            <if test="constructionSiteLogId != null">
                and construction_site_log_id = #{constructionSiteLogId,jdbcType=BIGINT}
            </if>
        </trim>
    </sql>
    
    <select id="selectByExampleEx" resultMap="BaseResultMap"
            parameterType="it.memelabs.smartnebula.lmm.persistence.main.dto.CommentTypeExample">
        select * from (
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="it.memelabs.smartnebula.lmm.persistence.main.mapper.CommentTypeMapper.Alias_Column_List">
            <property name="tableAlias" value="CT."/>
            <property name="fieldAlias" value=""/>
        </include>
        , C.construction_site_log_id
        from comment_type CT
        left JOIN comment C on CT.id = C.comment_type_id
        ) t
        <if test="_parameter != null">
        	<include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
</mapper>